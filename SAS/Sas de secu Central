#----- SAS Protection -----
alias Sensor d0
alias Aspiration d1
alias Pressurisation d2
define Lamp 1514476632
define AllSensor -1747737642
define Door -324331872

Start:
l r4 Sensor Pressure
blt r4 95 StartPressure
bge r4 95 StopPressure

move r0 0
lb r1 AllSensor RatioPollutant 1
lb r2 AllSensor RatioVolatiles 1
lb r3 AllSensor RatioNitrousOxyde 1
add r0 r1 r2
add r0 r0 r3
bgtz r0 StartVerrouillage
j Start

#----- Fonctions -----
StartVerrouillage:
sb Lamp On 0
s Pressurisation On 0
l r5 Sensor Pressure
bgtal r5 0 StartAspi
yield
beq r5 0 StopAspi
sb Door Open 0
j StartVerrouillage

StartAspi:
s Aspiration On 1
sb Lamp On 1
yield
j ra
StopAspi:
s Aspiration On 0
sb Lamp On 1
j Start

StartPressure:
#sb Door Open 1
s Pressurisation PressureExternal 100
s Pressurisation Mode 0
s Pressurisation On 1
yield
yield
j ra
StopPressure:
s Pressurisation PressureExternal 100
s Pressurisation Mode 0
s Pressurisation On 0
j ra
